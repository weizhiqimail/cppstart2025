# 1. C 程序介绍

## 1.1 C 语言的版本

+ **K&R C**

在 1978 年，Kernighan 和 Ritchie 的《The C Programming Language》第一版出版,一直被广泛作为 C 语言事实上的规范,称 K&R C;

+ **ANSI C 和 ISO C**

1989年，C 语言被 ANSI 标准化,对 K&R C 进行了扩展,包括了一些新特性,也规定了一套标准函数库;

ISO 成立 WG14 工作组来规定国际标准的 C 语言,通过对 ANSI 标准的少量修改,最终通过了 ISO 9899:1990，随后 ISO 标准被 ANSI 采纳;

+ **C99**

在 ANSI 标准化后，WG14 小组继续致力于改进 C 语言，新的标准很快推出，就是 ISO9899:1999 (1999年出版)，这个版本就是通常提及的 C99，被 ANSI 于 2000 年三月采用;

+ **C11**

2011 年 12 月 8 日，ISO 正式公布 C 语言的新的国际标准草案: ISO/IEC1988:2001，即C11;

## 1.2 特别说明
+ **C语言规范定义得非常宽泛**

long型数据长度不短于int型

short型不长于int型

+ **导致的结果**

相同的程序在不同编译器上具有不同的解释结果

相同的程序在不同平台上运行结果不同

例如：整型变量定义、对 `++`，`--` 的解释、输入输出赋值顺序的不同、浮点数计算精度的不同

**但是，只要坚持使用标准形式，把程序从一个编译器移植到另一个编译器，就不会出现什么问题。**

## 1.3 程序设计语言的构成
+ 数据成分，用于描述程序中所设计的数据。有哪些数据类型？如何使用？
+ 运算成分，用于描述程序中所包含的运算。有哪些运算符号？如何使用？
+ 控制成分，用于描述程序中的控制构造。三种类型的控制语句是如何写的？
+ 传输成分，用于描述程序中数据的传输。在程序中如何输入和输出数据？

## 1.4 程序编译步骤

+ **预处理**：宏定义展开、头文件展开、条件编译等，通过是将代码中的注释删除，这里并不会检查语法
  + `gcc -E hello.c -o hello.i`
  + 就是把头文件，宏全部都 **copy** 到它所对应的位置
  + **宏的本质就是替换**
+ **编译**：检查语法，将预处理后文件编译成汇编文件
  + `gcc -S hello.c -o hello.s`
+ **汇编**：将汇编文件生成目标二进制文件
  + `gcc -c hello.c -o hello.o`
  + 生成目标文件，但是目标文件不能执行
+ **链接**：C 语言写的程序时需要依赖各种库，所以编译之后还需要把库链接到最终的可执行程序中去
  + `gcc hello.c -o hello.out`

## 1.5 gcc 的命令行参数

+ 参数
    + `-E` 只进行预处理
    + `-S` 只进行预处理和编译
    + `-c` 只进行预处理、编译和汇编
    + `-o <filename>` 执行生成的输出文件为 filename
+ 文件后缀
    + `.c` C 语言文件
    + `.i` 预处理器后的 C 语言文件
    + `.s` 编译后的汇编文件
    + `-o` 编译后的目标文件

## 1.6 编译器的任务

编译是将高级程序设计语言编写的源代码，转换成目标平台的机器语言代码的过程。

对于 C 语言或者其他语言，编译器的编译工作一般分为两个步骤，编译和链接。

**编译是将源代码转换成目标代码的过程。目标代码文件不是一个完整的可执行文件，其中还缺少库代码和启动代码。**

目标代码文件必须**通过链接器将中间代码和其他运行库代码合并**才能形成目标平台的可执行文件。

## 1.7 链接器的任务

通过编译器和链接器的分步编译，首先能够提高代码的**可重用性**和**代码的可移植性**。

其次，也能够**提高编译效率**。原有系统库代码可以不编译，部分无修改的代码也可以直接使用原有的目标文件，直接通过高效率的链接形成可执行文件。
